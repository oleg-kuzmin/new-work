# [`FSD`](./index.md)

Существует 6 `Layers (Слои)`:

- `app`
- `pages`
- `widgets`
- `features`
- `entities`
- `shared`

Импортировать можно только из нижестоящего слоя. Например в `shared` нельзя импортировать из `features`.

Каждый слой содержит подкаталоги `Slice (Срезы)`.

Подкаталоги `Slice (Срезы)` состоят из `Segments (Сегменты)`.

## Layers (Слои)

Слои стандартизированы во всех проектах FSD. Вам не обязательно использовать все слои, но их названия важны. На данный момент их семь (сверху вниз):

1. `App` — всё, благодаря чему приложение запускается — роутинг, точки входа, глобальные стили, провайдеры и т. д.
2. `Pages` (страницы) — полные страницы или большие части страницы при вложенном роутинге.
3. `Widgets` (виджеты) — большие самодостаточные куски функциональности или интерфейса, обычно реализующие целый пользовательский сценарий.
4. `Features` (фичи) — повторно используемые реализации целых фич продукта, то есть действий, приносящих бизнес-ценность пользователю.
5. `Entities` (сущности) — бизнес-сущности, с которыми работает проект, например user или product.
6. `Shared` — переиспользуемый код, особенно когда она отделена от специфики проекта/бизнеса, хотя это не обязательно.

`App` и `Shared`, в отличие от других слоев, не имеют слайсов и состоят из сегментов напрямую.

Фишка слоев в том, что модули на одном слое могут знать только о модулях со слоев строго ниже, и как следствие, импортировать только с них.

## Slices (Срезы)

Дальше идут слайсы, они делят слой по предметной области. Вы можете называть ваши слайсы как угодно, и создавать их сколько угодно. Слайсы помогают не теряться в проекте, потому что группируют тесно связанный по смыслу код.

Слайсы не могут использовать другие слайсы на том же слое, и это обеспечивает сильную связанность кода внутри слайса и слабую сцепленность между слайсами.

Слайсы должны содержать публичный интерфейс, точку входа `index.ts` для реэкспорта.

## Segments (Сегменты)

Слайсы, а также слои `App` и `Shared`, состоят из сегментов, а сегменты группируют код по его назначению. Имена сегментов не зафиксированы стандартом, но существует несколько общепринятых имен для наиболее распространенных целей:

- `ui` — всё, что связано с отображением: UI-компоненты, форматтеры дат, стили и т.д.
- `api` — взаимодействие с бэкендом: функции запросов, типы данных, мапперы.
- `model` — модель данных: схемы валидации, интерфейсы, хранилища и бизнес-логика.
- `lib` — библиотечный код, который нужен другим модулям этого слайса.
- `config` — файлы конфигурации и фиче-флаги.

Обычно этих сегментов достаточно для большинства слоев, поэтому свои собственные сегменты обычно создают только в Shared или App, но это не жёсткое правило.

## Правила

| Слои     |             Можно использовать             |           Нельзя использовать           |
| :------- | :----------------------------------------: | :-------------------------------------: |
| app      | shared, entities, features, widgets, pages |                    -                    |
| pages    |    shared, entities, features, widgets     |                   app                   |
| widgets  |         shared, entities, features         |               pages, app                |
| features |              shared, entities              |           widgets, pages, app           |
| entities |                   shared                   |      features, widgets, pages, app      |
| shared   |                     -                      | entities, features, widgets, pages, app |

## Пример

```bash
/src
  /app
  /pages
    /catalog
  /widgets
  /features
    /add-to-cart
    /add-to-favorite
      /ui
      /model
      /lib
  /enitities
    /cart
    /product
  /shared
    /api
    /ui
    /lib
```
