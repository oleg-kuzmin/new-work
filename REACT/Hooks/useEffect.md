# [`useEffect()`](../index.md)

Можно использовать несколько раз, также как и `useState`, но это редко бывает необходимо.

Обычно пишется перед `return`.

Хук полностью асинхронный.

React сперва рендерит компонент, и только потом вызывает `useEffect`.

## Синтаксис

```jsx
useEffect(() => {}, []);
```

### `1. Функция`

Код функции выполнится после рендера компонента.

### `2. Массив зависимостей`

При изменении каких переменных мы должны вызвать функцию. Функция будет вызываться каждый раз, когда переменная, которая была передана как зависимость, будет изменяться.

Если массив пустой, то react выполнит то, что написано в функции один раз после начального рендеринга компонента.

Второй аргумент не обязателен, но лучше чтобы был всегда, т.к. если его не будет react будет вызывать callback каждый раз, когда что-то меняется в компоненте (не важно где), тем самым вызывая ненужное количество callback-функции без каких-либо проверок.

## Пример

```jsx
import { useEffect } from 'react';

function App() {
  useEffect(() => {
    // componentDidMount (этот код будет выполнен при монтировании компонента)
    // componentDidUpdate (а также после изменения любого элемента из массива зависимостей)

    // return (опционально)
    return () => {
      // componentWillUnmount (этот код будет выполнен при размонтировании компонента)
      // componentDidUpdate (а также после изменения любого элемента из массива зависимостей)
      // если ДАН ПУСТОЙ МАССИВ, то return выполнится только один раз
    };
  }, []);
  return <div></div>;
}
```

## Использование имени функции

```jsx
function App() {
  useEffect(function initPlugin() {
    plugin.start();
    return () => plugin.end();
  }, []);

  useEffect(function getApi() {
    api.start();
    return () => api.end();
  }, []);

  return <div></div>;
}
```
