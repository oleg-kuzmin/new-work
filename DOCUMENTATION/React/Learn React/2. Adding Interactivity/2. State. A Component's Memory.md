# [Состояние: Память компонента](../../index.md)

- [Обзор](#обзор)
- [Резюме](#резюме)
- [Следующие шаги](#следующие-шаги)

## [Обзор](#)

**Компонентам часто нужно менять то, что находится на экране, в результате взаимодействия. Ввод текста в форму должен обновлять поле ввода, нажатие «далее» на карусели изображений должно менять отображаемое изображение, нажатие «купить» должно помещать продукт в корзину. Компонентам нужно «запоминать» вещи: текущее значение ввода, текущее изображение, корзину покупок. В React этот тип памяти, специфичный для компонента, называется состоянием.**

### Ты выучишь

- Как добавить переменную состояния с помощью хука [`useState`](https://react.dev/reference/react/useState)
- Какую пару значений возвращает хук `useState`
- Как добавить более одной переменной состояния
- Почему состояние называется локальным

## [Когда обычной переменной недостаточно](#)

Вот компонент, который рендерит изображение скульптуры. Нажатие кнопки «Next» должно показать следующую скульптуру, изменив `index` на `1`, затем на `2` и т. д. Однако это не сработает (вы можете попробовать!):

```jsx
// App.js
import { sculptureList } from './data.js';

export default function Gallery() {
  let index = 0;

  function handleClick() {
    index = index + 1;
  }

  let sculpture = sculptureList[index];
  return (
    <>
      <button onClick={handleClick}>Next</button>
      <h2>
        <i>{sculpture.name} </i>
        by {sculpture.artist}
      </h2>
      <h3>
        ({index + 1} of {sculptureList.length})
      </h3>
      <img src={sculpture.url} alt={sculpture.alt} />
      <p>{sculpture.description}</p>
    </>
  );
}
```

```js
// data.js
export const sculptureList = [
  {
    name: 'Homenaje a la Neurocirugía',
    artist: 'Marta Colvin Andrade',
    description:
      'Although Colvin is predominantly known for abstract themes that allude to pre-Hispanic symbols, this gigantic sculpture, an homage to neurosurgery, is one of her most recognizable public art pieces.',
    url: 'https://i.imgur.com/Mx7dA2Y.jpg',
    alt: 'A bronze statue of two crossed hands delicately holding a human brain in their fingertips.',
  },
  // ...
];
```

Обработчик событий `handleClick` обновляет локальную переменную `index`. Но две вещи не позволяют сделать это изменение видимым:

1. Локальные переменные не сохраняются между рендерами. Когда React рендерит этот компонент во второй раз, он рендерит его с нуля — он не учитывает никаких изменений в локальных переменных.
2. Изменения локальных переменных не вызовут рендеринг. React не понимает, что ему нужно снова рендерить компонент с новыми данными.

Чтобы обновить компонент новыми данными, необходимо выполнить два действия:

1. Сохранить данные между рендерами.
2. Запустить React для рендеринга компонента с новыми данными (повторный рендеринг).

Хук [`useState`](https://react.dev/reference/react/useState) обеспечивает следующие две вещи:

1. Переменная состояния для сохранения данных между рендерингами.
2. Функция установки состояния для обновления переменной и запуска React для повторной отрисовки компонента.

## [Добавление переменной состояния](#)

Чтобы добавить переменную состояния, импортируйте `useState` из React в верхней части файла:

```jsx
import { useState } from 'react';
```

Затем замените эту строку:

```jsx
let index = 0;
```

на

```jsx
const [index, setIndex] = useState(0);
```

`index` — это переменная состояния, а `setIndex` — это функция установки.

Синтаксис `[` и `]` здесь называется [деструктуризацией массива](https://javascript.info/destructuring-assignment) и позволяет вам считывать значения из массива. Массив, возвращаемый `useState`, всегда содержит ровно два элемента.

Вот как они работают вместе в `handleClick`:

```jsx
function handleClick() {
  setIndex(index + 1);
}
```

Теперь нажатие кнопки «Next» переключает текущую скульптуру:

```jsx
// App.js
import { useState } from 'react';
import { sculptureList } from './data.js';

export default function Gallery() {
  const [index, setIndex] = useState(0);

  function handleClick() {
    setIndex(index + 1);
  }

  let sculpture = sculptureList[index];
  return (
    <>
      <button onClick={handleClick}>Next</button>
      <h2>
        <i>{sculpture.name} </i>
        by {sculpture.artist}
      </h2>
      <h3>
        ({index + 1} of {sculptureList.length})
      </h3>
      <img src={sculpture.url} alt={sculpture.alt} />
      <p>{sculpture.description}</p>
    </>
  );
}
```

```js
// data.js
export const sculptureList = [
  {
    name: 'Homenaje a la Neurocirugía',
    artist: 'Marta Colvin Andrade',
    description:
      'Although Colvin is predominantly known for abstract themes that allude to pre-Hispanic symbols, this gigantic sculpture, an homage to neurosurgery, is one of her most recognizable public art pieces.',
    url: 'https://i.imgur.com/Mx7dA2Y.jpg',
    alt: 'A bronze statue of two crossed hands delicately holding a human brain in their fingertips.',
  },
  // ...
];
```

### [Встречайте свой первый хук](#)
